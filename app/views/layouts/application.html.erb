<!DOCTYPE html>
<html>
    <head>
        <title>TechTalentTwitter</title>
        <%= csrf_meta_tags %>
        <%= csp_meta_tag %>

        <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
        <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    </head>

    <body>

        <% if request.fullpath != "/users/sign_in" && request.fullpath != "/users/sign_up"  && request.fullpath != "/users"%>
            <nav class="navbar navbar-light">
                <%= link_to "Home", root_path, class: "navbar-brand" %>

                <ul class="nav navbar-nav">
                    <li><%= link_to "Compose New Status", new_tweet_path %></li>
                    <% if user_signed_in? %>
                        <li><%= link_to "My Profile", show_user_path(:id => current_user.id) %></li>
                    <% end %>
                    <li><%= link_to "All Users", all_users_path %></li>
                </ul>

            <%= form_tag(tweets_path, :method => "get", id: "search-form", class: "form-inline", style: "margin-left: 15px") do %>
                <%= text_field_tag :search, params[:search], placeholder: "Search...", class: "form-control mr-sm-2" %>
                <%= submit_tag "Search", :name => nil, class: "btn btn-secondary my-2 my-sm-0" %>
            <% end %>

            <div class="right">
                <ul class="nav navbar-nav navbar-right">
                    <% if user_signed_in? %>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                <% if current_user.avatar.blank? == false %>
                                    <%= image_tag current_user.avatar.url, size:25, class: "user-pic-nav" %>
                                <% end %>
                                @<%= current_user.username %>
                                <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><%= link_to "Edit Profile", edit_user_registration_path %></li>
                                <li><%= link_to "Sign Out", destroy_user_session_path, method: :delete %></li>
                            </ul>
                        </li>
                    <% end %>
                </ul>
            </div>
        </nav>
    <% end %>

    <%= yield %>
</body>
</html>
